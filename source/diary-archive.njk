---
eleventyComputed:
  title: "{{ monthYear.title }}"
section_id: diary
layout: default
eleventyExcludeFromCollections: true
pagination:
  data: collections.diaryArchive
  size: 1
  alias: monthYear
permalink: "diary/{{ monthYear.title | lower | slugify }}/index.html"
breadcrumbs:
  - title: Home
    url: /
  - title: Diary
    url: /diary/
---
{% from './includes/card.njk' import card as card %}
{% from './includes/summary.njk' import summary as summary %}
{% from './includes/prevNext.njk' import prevNext as prevNext %}

{% for day in monthYear.days %}
<h2 class="h4">{{ day | date('dddd D MMMM YYYY') }}</h2>
<ul class="list list--timeline">
  {% for item in monthYear.posts %}
  {% if item.date | date('YYYY-MM-DD') == day %}
  
  {% set postContent %}
    {{ item.templateContent | safe }}
    <div class="mini-gallery">
    {% for image in item.data.photo %}
      {% img image.url, { alt: image.alt } %}
    {% endfor %}
    </div>
  {% endset %}
  
  <li class="list-item">
    {{ summary({
      content: {
        html: item.templateContent | safe
      } if not item.templateContent == '',
      date: {
        datetime: '<span class="visually-hidden">' + item.date | date('dddd D MMMM YYYY [at]') + '</span>' + item.date | date('h:mm a'),
        url: item.url
      },
      images: {
        object: item.data.photo
      }
    }) }}
  </li>
  {% endif %}
  {% endfor %}
</ul>
{% endfor %}

{{ prevNext({
  label: 'Navigate forwards or backwards in time',
  prev: {
    title: 'Go backwards in time',
    url: {
      link: '/diary/' + pagination.page.next.title | lower | slugify,
      text: pagination.page.next.title
    }
  } if pagination.page.next,
  next: {
    title: 'Go forwards in time',
    url: {
      link: '/diary/' + pagination.page.previous.title | lower | slugify,
      text: pagination.page.previous.title
    }
  } if pagination.page.previous
}) }}